(self.AMP=self.AMP||[]).push({m:0,v:"2108280007001",n:"amp-audio",ev:"0.1",l:true,f:function(AMP,_){"use strict";var h;function k(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function l(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:k(a)}}var m="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function n(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],e=0;e<b.length;++e){var d=b[e];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}n(this);"function"===typeof Symbol&&Symbol("x");var p;if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var q;a:{var r={a:!0},t={};try{t.__proto__=r;q=t.a;break a}catch(a){}q=!1}p=q?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var u=p;var v=Array.isArray;var w=Object.prototype.toString;function x(a,b,e){a=v(a)?a:[a];a=l(a);for(var d=a.next();!d.done;d=a.next()){var c=d.value;d=b.getAttribute(c);null!==d&&e.setAttribute(c,d)}}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function y(a,b){var e=[];for(a=a.firstChild;a;a=a.nextSibling)b(a)&&e.push(a);return e}function z(a){return y(a,(function(b){if("string"==typeof b)var e=b;else b.nodeType===Node.ELEMENT_NODE&&(e=b.tagName);b=e&&e.toLowerCase().startsWith("i-")?!0:b.nodeType!==Node.ELEMENT_NODE?!1:b.hasAttribute("placeholder")||b.hasAttribute("fallback")||b.hasAttribute("overflow");return!b}))}function aa(){var a=this;this.promise=new Promise((function(b,e){a.resolve=b;a.reject=e}))}function ba(a){return new Promise((function(b){b(a())}))}function ca(a){for(var b=null,e="",d=l(arguments),c=d.next();!c.done;c=d.next())if(c=c.value,c instanceof Error&&!b){var f=b=void 0;if(null==(f=Object.getOwnPropertyDescriptor(c,"message"))?0:f.writable)b=c;else{f=c.stack;var g=Error(c.message);for(b in c)g[b]=c[b];g.stack=f;b=g}}else e&&(e+=" "),e+=c;b?e&&(b.message=e+": "+b.message):b=Error(e);return b}function da(a){var b=ca.apply(null,arguments);b.expected=!0;return b}function ea(a,b){for(var e=[],d=1;d<arguments.length;++d)e[d-1]=arguments[d];e=da.apply(null,e);var c,f;null==(f=(c=self).__AMP_REPORT_ERROR)||f.call(c,e)}function A(a){ba((function(){return a.play(!1)})).catch((function(b){ea("TRYPLAY",b)}))}var B=self.AMP_CONFIG||{},fa=("string"==typeof B.cdnProxyRegex?new RegExp(B.cdnProxyRegex):B.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function C(a){if(self.document&&self.document.head&&(!self.location||!fa.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}B.cdnUrl||C("runtime-host");B.geoApiUrl||C("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var D=self.__AMP_LOG;function ha(){}function E(a,b,e,d,c){if(!D.user)throw Error("failed to call initLogConstructor");D.user.assert(a,b,e,d,c,void 0,void 0,void 0,void 0,void 0,void 0)}function F(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return G(a,b)}function ia(a){a=H(a);a=I(a);return J(a,"url")?G(a,"url"):null}function H(a){return a.nodeType?F((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function I(a){a=H(a);return a.isSingleDoc()?a.win:a}function G(a,b){J(a,b);a=K(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function L(a){var b=K(a)["amp-analytics-instrumentation"];if(b){if(b.promise)return b.promise;G(a,"amp-analytics-instrumentation");return b.promise=Promise.resolve(b.obj)}return null}function K(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function J(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}function ja(){var a=new aa,b=a.promise,e=a.reject;a=a.resolve;b.catch((function(){}));return{obj:null,promise:b,resolve:a,reject:e,context:null,ctor:null}}function ka(a){var b=L(I(a));if(b)return b;var e=H(a);return e.whenExtensionsKnown().then((function(){var d=e.getExtensionVersion("amp-analytics");return d?F(e.win,"extensions").waitForExtension("amp-analytics",d):null})).then((function(d){if(d){var c=I(a);var f=L(c);f?c=f:(c=K(c),c["amp-analytics-instrumentation"]=ja(),c=c["amp-analytics-instrumentation"].promise)}else c=null;return c}))}function M(a,b){var e=void 0===e?{}:e;var d=void 0===d?!0:d;ka(a).then((function(c){c&&c.triggerEventForTarget(a,b,e,d)}))}var N;function la(a,b,e){var d=ma();a.addEventListener(b,(function(c){try{return e(c)}catch(O){var f,g;null==(g=(f=self).__AMP_REPORT_ERROR)||g.call(f,O);throw O}}),d?void 0:!1)}function ma(){if(void 0!==N)return N;N=!1;try{var a={get capture(){N=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return N}function P(a,b,e){la(a,b,e)}var Q={title:"",artist:"",album:"",artwork:[{src:""}]};function na(a,b,e,d){var c=a.navigator;"mediaSession"in c&&a.MediaMetadata&&(c.mediaSession.metadata=new a.MediaMetadata(Q),c.mediaSession.metadata=new a.MediaMetadata(b),c.mediaSession.setActionHandler("play",e),c.mediaSession.setActionHandler("pause",d))}function oa(a){var b=a.querySelector('script[type="application/ld+json"]');if(b){try{var e=JSON.parse(b.textContent)}catch(c){e=null}var d=e;if(d&&d.image){if("string"===typeof d.image)return d.image;if(d.image["@list"]&&"string"===typeof d.image["@list"][0])return d.image["@list"][0];if("string"===typeof d.image.url)return d.image.url;if("string"===typeof d.image[0])return d.image[0]}}}function pa(a,b){var e=ia(a);if(b&&b.artwork){var d=b.artwork;ha(v(d));d.forEach((function(c){c&&(c="[object Object]"===w.call(c)?c.src:c,E(e.isProtocolValid(c)))}))}}function R(){this.C=100;this.o=this.B=0;this.j=Object.create(null)}R.prototype.has=function(a){return!!this.j[a]};R.prototype.get=function(a){var b=this.j[a];if(b)return b.access=++this.o,b.payload};R.prototype.put=function(a,b){this.has(a)||this.B++;this.j[a]={payload:b,access:this.o};if(!(this.B<=this.C)){a=this.j;var d,e=this.o+1;for(d in a){var c=a[d].access;if(c<e){e=c;var f=d}}void 0!==f&&(delete a[f],this.B--)}};new Set(["c","v","a","ad"]);var S,T;function U(a,b){var e=void 0===e?"source":e;E(null!=a,"%s %s must be available",b,e);var d=a;if("string"==typeof d){S||(S=self.document.createElement("a"),T=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new R));var c=S,f=T;if(f&&f.has(d))d=f.get(d);else{c.href=d;c.protocol||(c.href=c.href);var g={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==g.pathname[0]&&(g.pathname="/"+g.pathname);if("http:"==g.protocol&&80==g.port||"https:"==g.protocol&&443==g.port)g.port="",g.host=g.hostname;g.origin=c.origin&&"null"!=c.origin?c.origin:"data:"!=g.protocol&&g.host?g.protocol+"//"+g.host:g.href;f&&f.put(d,g);d=g}}(c="https:"==d.protocol||"localhost"==d.hostname||"127.0.0.1"==d.hostname)||(d=d.hostname,c=d.length-10,c=0<=c&&d.indexOf(".localhost",c)==c);E(c||/^\/\//.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,e,a)}function V(a){a=AMP.BaseElement.call(this,a)||this;a.h=null;a.A=Q;a.isPlaying=!1;return a}var W=AMP.BaseElement;V.prototype=m(W.prototype);V.prototype.constructor=V;if(u)u(V,W);else for(var X in W)if("prototype"!=X)if(Object.defineProperties){var Y=Object.getOwnPropertyDescriptor(W,X);Y&&Object.defineProperty(V,X,Y)}else V[X]=W[X];V.G=W.prototype;h=V.prototype;h.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a};h.buildCallback=function(){"nodisplay"===this.getLayout()&&(this.element.removeAttribute("autoplay"),this.buildAudioElement());this.element.classList.add("i-amphtml-media-component");this.registerAction("play",this.F.bind(this));this.registerAction("pause",this.D.bind(this))};h.mutatedAttributesCallback=function(a){if(this.h){var b=a.src,e=a.controlsList,d=a.loop;if(void 0!==b||void 0!==e||void 0!==d)void 0!==b&&U(b,this.element),x(["src","loop","controlsList"],this.element,this.h);b=a.title;var c=a.album,f=a.artwork;void 0===a.artist&&void 0===b&&void 0===c&&void 0===f||Z(this)}};h.buildAudioElement=function(){var a=this,b=this.element.ownerDocument.createElement("audio");if(b.play){b.controls=!0;var e=this.element.getAttribute("src");e&&U(e,this.element);x("src preload autoplay muted loop aria-label aria-describedby aria-labelledby controlsList".split(" "),this.element,b);b.classList.add("i-amphtml-fill-content");z(this.element).forEach((function(d){d.getAttribute&&d.getAttribute("src")&&U(d.getAttribute("src"),d);b.appendChild(d)}));this.element.appendChild(b);this.h=b;P(this.h,"playing",(function(){return qa(a)}));P(this.h,"play",(function(){return M(a.element,"audio-play")}));P(this.h,"pause",(function(){return M(a.element,"audio-pause")}))}else this.toggleFallback(!0)};h.layoutCallback=function(){"nodisplay"!==this.getLayout()&&this.buildAudioElement();Z(this);return"none"===this.element.getAttribute("preload")?this.h:this.loadPromise(this.h)};function Z(a){var f,b=a.getAmpDoc().win.document,e=a.element.getAttribute("artist")||"",d=a.element.getAttribute("title")||a.element.getAttribute("aria-label")||b.title||"",c=a.element.getAttribute("album")||"";(f=a.element.getAttribute("artwork")||oa(b))||(f=(f=b.querySelector('meta[property="og:image"]'))?f.getAttribute("content"):void 0);f||(f=(b=b.querySelector('link[rel="shortcut icon"]')||b.querySelector('link[rel="icon"]'))?b.getAttribute("href"):void 0);a.A={title:d,artist:e,album:c,artwork:[{src:f||""}]}}h.renderOutsideViewport=function(){return!0};h.pauseCallback=function(){this.h&&this.h.pause()};h.D=function(){this.h&&this.h.pause()};h.F=function(){this.h&&A(this.h)};function qa(a){pa(a.element,a.A);na(a.win,a.A,(function(){A(a.h)}),(function(){a.h.pause()}))}AMP.registerElement("amp-audio",V)}});//# sourceMappingURL=amp-audio-0.1.js.map